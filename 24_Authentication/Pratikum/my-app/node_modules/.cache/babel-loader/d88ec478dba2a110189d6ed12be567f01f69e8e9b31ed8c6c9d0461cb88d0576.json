{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport productAPI from \"../api/productAPI\";\nconst initialState = {\n  products: [],\n  status: \"idle\",\n  error: null\n};\nexport const fetchApiProduct = createAsyncThunk(\"products/fetchApiProduct\", productAPI.getPost);\nexport const postApiProduct = createAsyncThunk(\"products/postApiProduct\", productAPI.addProduct);\nexport const deleteApiProduct = createAsyncThunk(\"product/deleteApiProduct\", productAPI.deleteProduct);\nexport const editApiProduct = createAsyncThunk(\"product/editApiProduct:id\", productAPI.editProduct);\nexport const productSlice = createSlice({\n  name: \"products\",\n  initialState,\n  extraReducers: builder => {\n    builder.addCase(fetchApiProduct.pending, state => {\n      state.status = \"loading\";\n    });\n    builder.addCase(fetchApiProduct.fulfilled, (state, action) => {\n      state.status = \"succeeded\";\n      state.products = action.payload;\n    });\n    builder.addCase(fetchApiProduct.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.error.message;\n    });\n    builder.addCase(postApiProduct.pending, state => {\n      state.status = \"loading\";\n    });\n    builder.addCase(postApiProduct.fulfilled, (state, action) => {\n      state.status = \"succeeded\";\n      state.products = [...state.products, action.payload];\n      // console.log(\"cheked:\", action.payload);\n    });\n\n    builder.addCase(postApiProduct.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.error.message;\n    });\n    builder.addCase(deleteApiProduct.pending, state => {\n      state.status = \"loading\";\n    });\n    builder.addCase(deleteApiProduct.fulfilled, (state, action) => {\n      state.status = \"succeeded\";\n      state.products = state.products.filter(data => data.id !== action.payload);\n      // state.products = state.products.filter((data) => {\n      //   if (data.id !== action.payload) {\n      //     return { data };\n      //   }\n      //   return alert(\"Apakah anda ingin menghapus product ini?\");\n      // });\n    });\n\n    builder.addCase(deleteApiProduct.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.error.message;\n    });\n    builder.addCase(editApiProduct.pending, state => {\n      state.status = \"loading\";\n    });\n    builder.addCase(editApiProduct.fulfilled, (state, action) => {\n      state.status = \"succeeded\";\n      const {\n        id,\n        name,\n        category,\n        image,\n        freshness,\n        additional,\n        price\n      } = action.payload;\n      const productIndex = state.products.findIndex(data => data.id === id);\n      if (productIndex !== -1) {\n        state.products[productIndex] = {\n          ...state.products[productIndex],\n          name: name,\n          category: category,\n          image: image,\n          freshness: freshness,\n          additional: additional,\n          price: price\n        };\n      }\n    });\n    builder.addCase(editApiProduct.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.error.message;\n    });\n  }\n});\nexport default productSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","productAPI","initialState","products","status","error","fetchApiProduct","getPost","postApiProduct","addProduct","deleteApiProduct","deleteProduct","editApiProduct","editProduct","productSlice","name","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","rejected","message","filter","data","id","category","image","freshness","additional","price","productIndex","findIndex","reducer"],"sources":["/home/aboutme/Documents/react-full-stress/my-app/src/redux/productSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport productAPI from \"../api/productAPI\";\n\nconst initialState = {\n  products: [],\n  status: \"idle\",\n  error: null,\n};\n\nexport const fetchApiProduct = createAsyncThunk(\n  \"products/fetchApiProduct\",\n  productAPI.getPost\n);\n\nexport const postApiProduct = createAsyncThunk(\n  \"products/postApiProduct\",\n  productAPI.addProduct\n);\n\nexport const deleteApiProduct = createAsyncThunk(\n  \"product/deleteApiProduct\",\n  productAPI.deleteProduct\n);\n\nexport const editApiProduct = createAsyncThunk(\n  \"product/editApiProduct:id\",\n  productAPI.editProduct\n);\n\nexport const productSlice = createSlice({\n  name: \"products\",\n  initialState,\n  extraReducers: (builder) => {\n    builder.addCase(fetchApiProduct.pending, (state) => {\n      state.status = \"loading\";\n    });\n    builder.addCase(fetchApiProduct.fulfilled, (state, action) => {\n      state.status = \"succeeded\";\n      state.products = action.payload;\n    });\n    builder.addCase(fetchApiProduct.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.error.message;\n    });\n    builder.addCase(postApiProduct.pending, (state) => {\n      state.status = \"loading\";\n    });\n    builder.addCase(postApiProduct.fulfilled, (state, action) => {\n      state.status = \"succeeded\";\n      state.products = [...state.products, action.payload];\n      // console.log(\"cheked:\", action.payload);\n    });\n    builder.addCase(postApiProduct.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.error.message;\n    });\n    builder.addCase(deleteApiProduct.pending, (state) => {\n      state.status = \"loading\";\n    });\n    builder.addCase(deleteApiProduct.fulfilled, (state, action) => {\n      state.status = \"succeeded\";\n      state.products = state.products.filter(\n        (data) => data.id !== action.payload\n      );\n      // state.products = state.products.filter((data) => {\n      //   if (data.id !== action.payload) {\n      //     return { data };\n      //   }\n      //   return alert(\"Apakah anda ingin menghapus product ini?\");\n      // });\n    });\n    builder.addCase(deleteApiProduct.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.error.message;\n    });\n    builder.addCase(editApiProduct.pending, (state) => {\n      state.status = \"loading\";\n    });\n    builder.addCase(editApiProduct.fulfilled, (state, action) => {\n      state.status = \"succeeded\";\n      const { id, name, category, image, freshness, additional, price } =\n        action.payload;\n      const productIndex = state.products.findIndex((data) => data.id === id);\n      if (productIndex !== -1) {\n        state.products[productIndex] = {\n          ...state.products[productIndex],\n          name: name,\n          category: category,\n          image: image,\n          freshness: freshness,\n          additional: additional,\n          price: price,\n        };\n      }\n    });\n    builder.addCase(editApiProduct.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.error.message;\n    });\n  },\n});\nexport default productSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}