{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\n// import { v4 as uuid } from \"uuid\"\nimport axios from \"axios\";\nconst url = \"https://652a1c1155b137ddc83f4d53.mockapi.io/product\";\nconst initialState = {\n  products: [],\n  status: \"idle\",\n  error: null\n};\nexport const fetchProduct = createAsyncThunk(\"products/fetchProduct\", async () => {\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (err) {\n    throw err;\n  }\n});\nexport const productSlice = createSlice({\n  name: \"products\",\n  initialState,\n  extraReducers: builder => {\n    builder.addCase(fetchProduct.pending, state => {\n      state.status = \"loading\";\n    }).addCase(fetchProduct.fulfilled, (state, action) => {\n      state.status = \"succeeded\";\n      state.products = action.payload;\n    }).addCase(fetchProduct.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.error.message;\n    });\n  },\n  reducers: {\n    //function untuk menambahkan data object yang ada pada array products di initialState\n    addProduct: (state, actions) => {\n      state.products = [...state.products, actions.payload];\n      console.log(\"cheked:\", actions.payload);\n    },\n    //function untuk melakukan edit data object yang telah ada pada array products\n    editProduct: (state, actions) => {\n      const {\n        id,\n        name,\n        category,\n        image,\n        freshness,\n        additional,\n        price\n      } = actions.payload;\n      const productIndex = state.products.findIndex(data => data.id === id);\n      if (productIndex !== -1) {\n        state.products[productIndex] = {\n          ...state.products[productIndex],\n          name: name,\n          category: category,\n          image: image,\n          freshness: freshness,\n          additional: additional,\n          price: price\n        };\n      }\n    },\n    //function untuk melakukan penghapusan data yang ada\n    deleteProduct: (state, action) => {\n      state.products = state.products.filter(data => {\n        if (data.id !== action.payload) {\n          return {\n            data\n          };\n        }\n        return alert(\"Apakah anda ingin menghapus product ini?\");\n      });\n    }\n  }\n});\nexport const getProductStatus = state => state.list.status;\nexport const getProductError = state => state.list.error;\nexport const {\n  addProduct,\n  editProduct,\n  deleteProduct\n} = productSlice.actions;\nexport default productSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","url","initialState","products","status","error","fetchProduct","response","get","data","err","productSlice","name","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","rejected","message","reducers","addProduct","actions","console","log","editProduct","id","category","image","freshness","additional","price","productIndex","findIndex","deleteProduct","filter","alert","getProductStatus","list","getProductError","reducer"],"sources":["/home/aboutme/Documents/react_dady-bima/22_Introduction Restfull API/Pratikum/my-app/src/redux/productSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\n// import { v4 as uuid } from \"uuid\"\nimport axios from \"axios\";\n\nconst url = \"https://652a1c1155b137ddc83f4d53.mockapi.io/product\";\n\nconst initialState = {\n  products: [],\n  status: \"idle\",\n  error: null,\n};\n\nexport const fetchProduct = createAsyncThunk(\n  \"products/fetchProduct\",\n  async () => {\n    try {\n      const response = await axios.get(url);\n      return response.data;\n    } catch (err) {\nthrow err\n    }\n  }\n);\n\nexport const productSlice = createSlice({\n  name: \"products\",\n  initialState,\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchProduct.pending, (state) => {\n        state.status = \"loading\";\n      })\n      .addCase(fetchProduct.fulfilled, (state, action) => {\n        state.status = \"succeeded\";\n        state.products = action.payload;\n      })\n      .addCase(fetchProduct.rejected, (state, action) => {\n        state.status = \"failed\";\n        state.error = action.error.message;\n      });\n    },\n  reducers: {\n    //function untuk menambahkan data object yang ada pada array products di initialState\n    addProduct: (state, actions) => {\n      state.products = [...state.products, actions.payload];\n      console.log(\"cheked:\", actions.payload);\n    },\n\n    //function untuk melakukan edit data object yang telah ada pada array products\n    editProduct: (state, actions) => {\n      const { id, name, category, image, freshness, additional, price } =\n        actions.payload;\n      const productIndex = state.products.findIndex((data) => data.id === id);\n      if (productIndex !== -1) {\n        state.products[productIndex] = {\n          ...state.products[productIndex],\n          name: name,\n          category: category,\n          image: image,\n          freshness: freshness,\n          additional: additional,\n          price: price,\n        };\n      }\n    },\n\n    //function untuk melakukan penghapusan data yang ada\n    deleteProduct: (state, action) => {\n      state.products = state.products.filter((data) => {\n        if (data.id !== action.payload) {\n          return { data };\n        }\n        return alert(\"Apakah anda ingin menghapus product ini?\");\n      });\n    },\n  },\n});\n\nexport const getProductStatus = (state) => state.list.status;\nexport const getProductError = (state) => state.list.error;\n\nexport const { addProduct, editProduct, deleteProduct } = productSlice.actions;\n\nexport default productSlice.reducer;\n"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,WAAW,QAAQ,kBAAkB;AAChE;AACA,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,GAAG,GAAG,qDAAqD;AAEjE,MAAMC,YAAY,GAAG;EACnBC,QAAQ,EAAE,EAAE;EACZC,MAAM,EAAE,MAAM;EACdC,KAAK,EAAE;AACT,CAAC;AAED,OAAO,MAAMC,YAAY,GAAGR,gBAAgB,CAC1C,uBAAuB,EACvB,YAAY;EACV,IAAI;IACF,MAAMS,QAAQ,GAAG,MAAMP,KAAK,CAACQ,GAAG,CAACP,GAAG,CAAC;IACrC,OAAOM,QAAQ,CAACE,IAAI;EACtB,CAAC,CAAC,OAAOC,GAAG,EAAE;IAClB,MAAMA,GAAG;EACL;AACF,CACF,CAAC;AAED,OAAO,MAAMC,YAAY,GAAGZ,WAAW,CAAC;EACtCa,IAAI,EAAE,UAAU;EAChBV,YAAY;EACZW,aAAa,EAAGC,OAAO,IAAK;IAC1BA,OAAO,CACJC,OAAO,CAACT,YAAY,CAACU,OAAO,EAAGC,KAAK,IAAK;MACxCA,KAAK,CAACb,MAAM,GAAG,SAAS;IAC1B,CAAC,CAAC,CACDW,OAAO,CAACT,YAAY,CAACY,SAAS,EAAE,CAACD,KAAK,EAAEE,MAAM,KAAK;MAClDF,KAAK,CAACb,MAAM,GAAG,WAAW;MAC1Ba,KAAK,CAACd,QAAQ,GAAGgB,MAAM,CAACC,OAAO;IACjC,CAAC,CAAC,CACDL,OAAO,CAACT,YAAY,CAACe,QAAQ,EAAE,CAACJ,KAAK,EAAEE,MAAM,KAAK;MACjDF,KAAK,CAACb,MAAM,GAAG,QAAQ;MACvBa,KAAK,CAACZ,KAAK,GAAGc,MAAM,CAACd,KAAK,CAACiB,OAAO;IACpC,CAAC,CAAC;EACJ,CAAC;EACHC,QAAQ,EAAE;IACR;IACAC,UAAU,EAAEA,CAACP,KAAK,EAAEQ,OAAO,KAAK;MAC9BR,KAAK,CAACd,QAAQ,GAAG,CAAC,GAAGc,KAAK,CAACd,QAAQ,EAAEsB,OAAO,CAACL,OAAO,CAAC;MACrDM,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEF,OAAO,CAACL,OAAO,CAAC;IACzC,CAAC;IAED;IACAQ,WAAW,EAAEA,CAACX,KAAK,EAAEQ,OAAO,KAAK;MAC/B,MAAM;QAAEI,EAAE;QAAEjB,IAAI;QAAEkB,QAAQ;QAAEC,KAAK;QAAEC,SAAS;QAAEC,UAAU;QAAEC;MAAM,CAAC,GAC/DT,OAAO,CAACL,OAAO;MACjB,MAAMe,YAAY,GAAGlB,KAAK,CAACd,QAAQ,CAACiC,SAAS,CAAE3B,IAAI,IAAKA,IAAI,CAACoB,EAAE,KAAKA,EAAE,CAAC;MACvE,IAAIM,YAAY,KAAK,CAAC,CAAC,EAAE;QACvBlB,KAAK,CAACd,QAAQ,CAACgC,YAAY,CAAC,GAAG;UAC7B,GAAGlB,KAAK,CAACd,QAAQ,CAACgC,YAAY,CAAC;UAC/BvB,IAAI,EAAEA,IAAI;UACVkB,QAAQ,EAAEA,QAAQ;UAClBC,KAAK,EAAEA,KAAK;UACZC,SAAS,EAAEA,SAAS;UACpBC,UAAU,EAAEA,UAAU;UACtBC,KAAK,EAAEA;QACT,CAAC;MACH;IACF,CAAC;IAED;IACAG,aAAa,EAAEA,CAACpB,KAAK,EAAEE,MAAM,KAAK;MAChCF,KAAK,CAACd,QAAQ,GAAGc,KAAK,CAACd,QAAQ,CAACmC,MAAM,CAAE7B,IAAI,IAAK;QAC/C,IAAIA,IAAI,CAACoB,EAAE,KAAKV,MAAM,CAACC,OAAO,EAAE;UAC9B,OAAO;YAAEX;UAAK,CAAC;QACjB;QACA,OAAO8B,KAAK,CAAC,0CAA0C,CAAC;MAC1D,CAAC,CAAC;IACJ;EACF;AACF,CAAC,CAAC;AAEF,OAAO,MAAMC,gBAAgB,GAAIvB,KAAK,IAAKA,KAAK,CAACwB,IAAI,CAACrC,MAAM;AAC5D,OAAO,MAAMsC,eAAe,GAAIzB,KAAK,IAAKA,KAAK,CAACwB,IAAI,CAACpC,KAAK;AAE1D,OAAO,MAAM;EAAEmB,UAAU;EAAEI,WAAW;EAAES;AAAc,CAAC,GAAG1B,YAAY,CAACc,OAAO;AAE9E,eAAed,YAAY,CAACgC,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}